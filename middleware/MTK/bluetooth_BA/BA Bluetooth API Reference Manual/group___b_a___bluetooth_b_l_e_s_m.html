<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>BA Bluetooth API Reference: SM</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="MediaTek.PNG"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BA Bluetooth API Reference
   &#160;<span id="projectnumber">Rev 1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="modules.html"><span>API&#160;Reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group___b_a___bluetooth_b_l_e_s_m.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#groups">Modules</a>  </div>
  <div class="headertitle">
<div class="title">SM<div class="ingroups"><a class="el" href="group___b_a___bluetooth.html">BA_Bluetooth</a> &raquo; <a class="el" href="group___b_a___bluetooth_b_l_e.html">BLE</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>This section describes the SM APIs.  
<a href="#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Overview</h2>
<p>This section describes the SM APIs. </p>
<p>The Security Manager (SM) defines the protocol and behavior to manage pairing, authentication and encryption between low energy devices.</p>
<h1>Terms and Acronyms </h1>
<table class="doxtable">
<tr>
<th>Terms </th><th>Details  </th></tr>
<tr>
<td><b>LTK</b> </td><td>Long Term Key, is a 128-bit key used to generate the contributory session key for an encrypted connection. </td></tr>
<tr>
<td><b>STK</b> </td><td>Short Term Key, is a 128-bit key used to encrypt a connection following pairing. </td></tr>
<tr>
<td><b>EDIV</b> </td><td>Encrypted Diversifier, is a 16-bit stored value used to identify the LTK distributed during the LE legacy pairing. </td></tr>
<tr>
<td><b>IRK</b> </td><td>Identity Resolving Key, is a 128-bit key used to generate and resolve random addresses. </td></tr>
<tr>
<td><b>CSRK</b> </td><td>Connection Signature Resolving Key, is a 128-bit key used to sign data and verify signatures on the receiving device. </td></tr>
<tr>
<td><b>MITM</b> </td><td>Man-in-the-middle attack, is an attack where the attacker secretly relays and possibly alters the communication between two parties who believe they are directly communicating with each other. </td></tr>
<tr>
<td><b>Out-Of-Band</b> </td><td>The model is primarily designed for scenarios where an Out of Band mechanism is used to both discover the devices as well as to exchange or transfer cryptographic numbers used in the pairing process. </td></tr>
</table>
<h1><a class="anchor" id="ble_sm_api_usage"></a>
How to use this module</h1>
<ul>
<li>Step1: Mandatory, implement the API <a class="el" href="group___b_a___bluetooth_b_l_e_s_m.html#gaf9f17496f44163a05bc2aa3c943bd121">ble_sm_common_callback()</a> to handle the events sent by the SM.<ul>
<li>Sample code: <div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code" href="group___b_a___bluetooth_b_l_e_s_m.html#gaf9f17496f44163a05bc2aa3c943bd121">ble_sm_common_callback</a>(<a class="code" href="group___b_a___bluetoothble__events__enum.html#gacfdd3b8f3b7fac98bc2fe221de579bad">ble_event_t</a> event_id, <span class="keyword">const</span> <span class="keywordtype">void</span> *param)</div><div class="line">{</div><div class="line">    <span class="keywordflow">switch</span> (event_id) {</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group___b_a___bluetoothble__events__enum.html#ggacfdd3b8f3b7fac98bc2fe221de579bada0b4bb479a0bd4a92c7b248422d0e55e8">BLE_SM_STORE_KEYS_REQ</a>: {</div><div class="line">            <span class="comment">//Store the keys into a flash memory or file system.</span></div><div class="line">        }</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group___b_a___bluetoothble__events__enum.html#ggacfdd3b8f3b7fac98bc2fe221de579bada38146f143a31fffc5952532b20b4a7c7">BLE_SM_RETRIEVE_KEYS_REQ</a>: {</div><div class="line">            <span class="comment">//Get the keys from flash memory or file system then fill in the parameter.</span></div><div class="line">        }</div><div class="line">        <span class="keywordflow">default</span>:</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --></li>
</ul>
</li>
<li>Step2: Mandatory, implement the API <a class="el" href="group___b_a___bluetooth_b_l_e_s_m.html#ga0dc335c01fd4f5e86040c91d29b26153">ble_sm_get_io_capability()</a>, SM will call this API to get the IO capability based on hardware features of the device. The value should be fixed in compile time.<ul>
<li>Sample code: <div class="fragment"><div class="line"><a class="code" href="group___b_a___bluetoothble__sm__enum.html#gac58512a720ddf011d9034388e277f56e">ble_sm_io_capability_t</a> <a class="code" href="group___b_a___bluetooth_b_l_e_s_m.html#ga0dc335c01fd4f5e86040c91d29b26153">ble_sm_get_io_capability</a>(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <span class="keywordflow">return</span> BLE_SM_IO_CAPABILITY_NO_INPUT_NO_OUTPUT;</div><div class="line">}</div></div><!-- fragment --></li>
</ul>
</li>
<li>Step3: Optional, call <a class="el" href="group___b_a___bluetooth_b_l_e_s_m.html#ga81d990114c27de9aabb66107cbce7c8d">ble_sm_is_pairing_authorization_enabled()</a> to check the old value, then call <a class="el" href="group___b_a___bluetooth_b_l_e_s_m.html#gab475f50b0ff209015fa4f2120350cb4d">ble_sm_set_pairing_authorization()</a> to enable/disable pairing authorization. Once the pairing result is available, please reset to the old value.<ul>
<li>Sample code: <div class="fragment"><div class="line"><span class="keywordtype">bool</span> enabled;</div><div class="line">enabled = <a class="code" href="group___b_a___bluetooth_b_l_e_s_m.html#ga81d990114c27de9aabb66107cbce7c8d">ble_sm_is_pairing_authorization_enabled</a>();</div><div class="line"><span class="keywordflow">if</span> (!enabled) {</div><div class="line">    <a class="code" href="group___b_a___bluetooth_b_l_e_s_m.html#gab475f50b0ff209015fa4f2120350cb4d">ble_sm_set_pairing_authorization</a>(<span class="keyword">true</span>);</div><div class="line">}</div><div class="line"><span class="comment">//Reset the value after obtaining the pairing result.</span></div><div class="line"><span class="keywordtype">void</span> <a class="code" href="group___b_a___bluetooth_b_l_e_s_m.html#gaf9f17496f44163a05bc2aa3c943bd121">ble_sm_common_callback</a>(<a class="code" href="group___b_a___bluetoothble__events__enum.html#gacfdd3b8f3b7fac98bc2fe221de579bad">ble_event_t</a> event_id, <span class="keyword">const</span> <span class="keywordtype">void</span> *param)</div><div class="line">{</div><div class="line">    <span class="keywordflow">switch</span> (event_id) {</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group___b_a___bluetoothble__events__enum.html#ggacfdd3b8f3b7fac98bc2fe221de579bada955a3accb39ee04ea7812994a2e02dd2">BLE_SM_PAIRING_RESULT_IND</a>: {</div><div class="line">            <a class="code" href="group___b_a___bluetooth_b_l_e_s_m.html#gab475f50b0ff209015fa4f2120350cb4d">ble_sm_set_pairing_authorization</a>(enabled);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">default</span>:</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">}</div></div><!-- fragment --></li>
</ul>
</li>
<li>Step4: Optional, call <a class="el" href="group___b_a___bluetooth_b_l_e_s_m.html#gaf52c4ebef940151b0f6675363caed942">ble_sm_bond()</a> to pair with a remote device. This API performs the STK encryption procedure once the pairing is finished.<ul>
<li>Sample code: <div class="fragment"><div class="line"><a class="code" href="group___b_a___bluetoothble__status__enum.html#gae834c4fd568eace4e2ab307e8905ab7d">ble_status_t</a> status;</div><div class="line"><a class="code" href="structble__sm__pairing__attribute__t.html">ble_sm_pairing_attribute_t</a> local_attributes = {<span class="keyword">true</span>, <span class="keyword">true</span>, <span class="keyword">false</span>};<span class="comment">//mitm, bond, oob</span></div><div class="line">U8 device_bt_addr[6] = {0x10, 0x06, 0x00, 0x86, 0x19, 0x00};</div><div class="line"><a class="code" href="group___b_a___bluetooth_b_l_e_s_m.html#gab475f50b0ff209015fa4f2120350cb4d">ble_sm_set_pairing_authorization</a>(<span class="keyword">true</span>);</div><div class="line">status = <a class="code" href="group___b_a___bluetooth_b_l_e_s_m.html#gaf52c4ebef940151b0f6675363caed942">ble_sm_bond</a>((<a class="code" href="structble__address__t.html">ble_address_t</a>*)device_bt_addr, &amp;local_attributes);</div></div><!-- fragment --></li>
</ul>
</li>
<li>Step5: Optional, call <a class="el" href="group___b_a___bluetooth_b_l_e_s_m.html#ga16ea9e4df9376f15f69a50b9553ea2b4">ble_sm_encrypt()</a> to only encrypt with a paired remote device using LTK. This is usually performed after reconnecting with the paired remote device.<ul>
<li>Sample code: <div class="fragment"><div class="line"><a class="code" href="group___b_a___bluetoothble__status__enum.html#gae834c4fd568eace4e2ab307e8905ab7d">ble_status_t</a> status;</div><div class="line">U8 device_bt_addr[6] = {0x10, 0x06, 0x00, 0x86, 0x19, 0x00};</div><div class="line"><a class="code" href="structble__sm__encrypt__keyset__t.html">ble_sm_encrypt_keyset_t</a> encrypt_keyset = {0};</div><div class="line"></div><div class="line">encrypt_keyset.<a class="code" href="structble__sm__encrypt__keyset__t.html#aced7ac80397d2549e5ecbb13de235936">ediv</a> = ediv; <span class="comment">//EDIV is the key value of a remote device after bond.</span></div><div class="line">encrypt_keyset.<a class="code" href="structble__sm__encrypt__keyset__t.html#a6690a8f5c476c84360fa87179a29ce29">rand</a> = rand; <span class="comment">//Rand is the key value of a remote device after bond.</span></div><div class="line">OS_MemCpy(encrypt_keyset.<a class="code" href="structble__sm__encrypt__keyset__t.html#a429d7f75d89988aecee757870aa615e5">ltk</a>, ltk, SM_LTK_VALUE_LENGTH); <span class="comment">//LTK is the key value of remote device after bond.</span></div><div class="line">status = <a class="code" href="group___b_a___bluetooth_b_l_e_s_m.html#ga16ea9e4df9376f15f69a50b9553ea2b4">ble_sm_encrypt</a>((<a class="code" href="structble__address__t.html">ble_address_t</a>*)device_bt_addr, &amp;encrypt_keyset);</div></div><!-- fragment --> </li>
</ul>
</li>
</ul>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaf52c4ebef940151b0f6675363caed942"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___b_a___bluetoothble__status__enum.html#gae834c4fd568eace4e2ab307e8905ab7d">ble_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_a___bluetooth_b_l_e_s_m.html#gaf52c4ebef940151b0f6675363caed942">ble_sm_bond</a> (const <a class="el" href="structble__address__t.html">ble_address_t</a> *remote_address, const <a class="el" href="structble__sm__pairing__attribute__t.html">ble_sm_pairing_attribute_t</a> *local_attributes)</td></tr>
<tr class="separator:gaf52c4ebef940151b0f6675363caed942"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1412bffe1028367c324093e34f5cc2ac"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_a___bluetooth_b_l_e_s_m.html#ga1412bffe1028367c324093e34f5cc2ac">ble_sm_reply_pairing_param</a> (const <a class="el" href="structble__address__t.html">ble_address_t</a> *remote_address, const <a class="el" href="structble__sm__pairing__attribute__t.html">ble_sm_pairing_attribute_t</a> *local_attributes)</td></tr>
<tr class="separator:ga1412bffe1028367c324093e34f5cc2ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga81d990114c27de9aabb66107cbce7c8d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_a___bluetooth_b_l_e_s_m.html#ga81d990114c27de9aabb66107cbce7c8d">ble_sm_is_pairing_authorization_enabled</a> ()</td></tr>
<tr class="separator:ga81d990114c27de9aabb66107cbce7c8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab475f50b0ff209015fa4f2120350cb4d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_a___bluetooth_b_l_e_s_m.html#gab475f50b0ff209015fa4f2120350cb4d">ble_sm_set_pairing_authorization</a> (bool enable)</td></tr>
<tr class="separator:gab475f50b0ff209015fa4f2120350cb4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae639b77a738674db06d7d77980746755"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_a___bluetooth_b_l_e_s_m.html#gae639b77a738674db06d7d77980746755">ble_sm_reply_pairing_authorization</a> (const <a class="el" href="structble__address__t.html">ble_address_t</a> *remote_address, bool authorized)</td></tr>
<tr class="separator:gae639b77a738674db06d7d77980746755"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa1b12f0813581be5e73b54c9b2639c19"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___b_a___bluetoothble__status__enum.html#gae834c4fd568eace4e2ab307e8905ab7d">ble_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_a___bluetooth_b_l_e_s_m.html#gaa1b12f0813581be5e73b54c9b2639c19">ble_sm_reply_input_passkey</a> (const <a class="el" href="structble__address__t.html">ble_address_t</a> *remote_address, bool accept, uint32_t passkey)</td></tr>
<tr class="separator:gaa1b12f0813581be5e73b54c9b2639c19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac05f7b2605e728e88d64c06cf7f3605e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___b_a___bluetoothble__status__enum.html#gae834c4fd568eace4e2ab307e8905ab7d">ble_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_a___bluetooth_b_l_e_s_m.html#gac05f7b2605e728e88d64c06cf7f3605e">ble_sm_reply_display_passkey</a> (const <a class="el" href="structble__address__t.html">ble_address_t</a> *remote_address, bool changed, uint32_t passkey)</td></tr>
<tr class="separator:gac05f7b2605e728e88d64c06cf7f3605e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8a48503e0127214dd44be2562b60d368"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___b_a___bluetoothble__status__enum.html#gae834c4fd568eace4e2ab307e8905ab7d">ble_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_a___bluetooth_b_l_e_s_m.html#ga8a48503e0127214dd44be2562b60d368">ble_sm_reply_oob_data</a> (const <a class="el" href="structble__address__t.html">ble_address_t</a> *remote_address, bool accept, const uint8_t *oob_data)</td></tr>
<tr class="separator:ga8a48503e0127214dd44be2562b60d368"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga16ea9e4df9376f15f69a50b9553ea2b4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___b_a___bluetoothble__status__enum.html#gae834c4fd568eace4e2ab307e8905ab7d">ble_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_a___bluetooth_b_l_e_s_m.html#ga16ea9e4df9376f15f69a50b9553ea2b4">ble_sm_encrypt</a> (const <a class="el" href="structble__address__t.html">ble_address_t</a> *remote_address, <a class="el" href="structble__sm__encrypt__keyset__t.html">ble_sm_encrypt_keyset_t</a> *remote_keyset)</td></tr>
<tr class="separator:ga16ea9e4df9376f15f69a50b9553ea2b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf9f17496f44163a05bc2aa3c943bd121"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_a___bluetooth_b_l_e_s_m.html#gaf9f17496f44163a05bc2aa3c943bd121">ble_sm_common_callback</a> (<a class="el" href="group___b_a___bluetoothble__events__enum.html#gacfdd3b8f3b7fac98bc2fe221de579bad">ble_event_t</a> event_id, const void *param)</td></tr>
<tr class="separator:gaf9f17496f44163a05bc2aa3c943bd121"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0dc335c01fd4f5e86040c91d29b26153"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___b_a___bluetoothble__sm__enum.html#gac58512a720ddf011d9034388e277f56e">ble_sm_io_capability_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_a___bluetooth_b_l_e_s_m.html#ga0dc335c01fd4f5e86040c91d29b26153">ble_sm_get_io_capability</a> (void)</td></tr>
<tr class="separator:ga0dc335c01fd4f5e86040c91d29b26153"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group___b_a___bluetoothble__sm__enum"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_a___bluetoothble__sm__enum.html">Enum</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group___b_a___bluetoothble__sm__struct"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_a___bluetoothble__sm__struct.html">Struct</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gaf52c4ebef940151b0f6675363caed942"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___b_a___bluetoothble__status__enum.html#gae834c4fd568eace4e2ab307e8905ab7d">ble_status_t</a> ble_sm_bond </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structble__address__t.html">ble_address_t</a> *&#160;</td>
          <td class="paramname"><em>remote_address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structble__sm__pairing__attribute__t.html">ble_sm_pairing_attribute_t</a> *&#160;</td>
          <td class="paramname"><em>local_attributes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000126">Deprecated:</a></b></dt><dd>This function enables pairing as a peripheral or central role.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">remote_address</td><td>is the device address to bond. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">local_attributes</td><td>is the pair attributes to send a pair request. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If the operation completes successfully, the returned value is <a class="el" href="group___b_a___bluetoothble__status__enum.html#ggae834c4fd568eace4e2ab307e8905ab7da8d12a0b561e49e0ebc2f01f09caff1c4" title="The operation completed successfully. ">BLE_STATUS_SUCCESS</a>; If the SM is busy, the returned value is <a class="el" href="group___b_a___bluetoothble__status__enum.html#ggae834c4fd568eace4e2ab307e8905ab7dab01d251da6c497c8386b7677390c31e5" title="One GAP operation is ongoing, the new operation cannot be added. ">BLE_STATUS_GAP_BUSY</a>. Try to bond later; If pending, the returned value is <a class="el" href="group___b_a___bluetoothble__status__enum.html#ggae834c4fd568eace4e2ab307e8905ab7da3fbe807100a0e470dd0c1dd071db9965" title="GAP operation successfully started but pending. ">BLE_STATUS_GAP_PENDING</a>, and will receive other events(<a class="el" href="group___b_a___bluetoothble__events__enum.html#gacfdd3b8f3b7fac98bc2fe221de579bad">ble_event_t</a>) later. For more information about other errors, please refer to <a class="el" href="group___b_a___bluetoothble__status__enum.html#gae834c4fd568eace4e2ab307e8905ab7d">ble_status_t</a>. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>Before using this function, please make sure ACL link is established. </dd></dl>

</div>
</div>
<a class="anchor" id="gaf9f17496f44163a05bc2aa3c943bd121"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ble_sm_common_callback </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___b_a___bluetoothble__events__enum.html#gacfdd3b8f3b7fac98bc2fe221de579bad">ble_event_t</a>&#160;</td>
          <td class="paramname"><em>event_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>param</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000135">Deprecated:</a></b></dt><dd>This function is a static callback to capture the event.</dd></dl>
<p>User defined implementation is enabled. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">event_id</td><td>is notification sent by the SM. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">param</td><td>is parameter pointer as per the events. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None. </dd></dl>

</div>
</div>
<a class="anchor" id="ga16ea9e4df9376f15f69a50b9553ea2b4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___b_a___bluetoothble__status__enum.html#gae834c4fd568eace4e2ab307e8905ab7d">ble_status_t</a> ble_sm_encrypt </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structble__address__t.html">ble_address_t</a> *&#160;</td>
          <td class="paramname"><em>remote_address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structble__sm__encrypt__keyset__t.html">ble_sm_encrypt_keyset_t</a> *&#160;</td>
          <td class="paramname"><em>remote_keyset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000134">Deprecated:</a></b></dt><dd>Encrypt with the paired device after reconnect.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">remote_address</td><td>is the device address to encrypt. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">remote_keyset</td><td>is the keyset to encrypt. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If the operation completes successfully, the returned value is <a class="el" href="group___b_a___bluetoothble__status__enum.html#ggae834c4fd568eace4e2ab307e8905ab7da8d12a0b561e49e0ebc2f01f09caff1c4" title="The operation completed successfully. ">BLE_STATUS_SUCCESS</a>; if pending, the returned value is <a class="el" href="group___b_a___bluetoothble__status__enum.html#ggae834c4fd568eace4e2ab307e8905ab7da3fbe807100a0e470dd0c1dd071db9965" title="GAP operation successfully started but pending. ">BLE_STATUS_GAP_PENDING</a>, otherwise the returned value is less than zero. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>Before using this function, please make sure ACL link is established. </dd></dl>

</div>
</div>
<a class="anchor" id="ga0dc335c01fd4f5e86040c91d29b26153"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___b_a___bluetoothble__sm__enum.html#gac58512a720ddf011d9034388e277f56e">ble_sm_io_capability_t</a> ble_sm_get_io_capability </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000136">Deprecated:</a></b></dt><dd>This function is to get the IO capability based on hardware features of the device.</dd></dl>
<p>The SM will call it when Bluetooth powers on. User defined implementation is enabled. </p><dl class="section return"><dt>Returns</dt><dd>For more information about IO capability, please refer to <a class="el" href="group___b_a___bluetoothble__sm__enum.html#gac58512a720ddf011d9034388e277f56e">ble_sm_io_capability_t</a>. </dd></dl>

</div>
</div>
<a class="anchor" id="ga81d990114c27de9aabb66107cbce7c8d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ble_sm_is_pairing_authorization_enabled </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000128">Deprecated:</a></b></dt><dd>This function verifies if an authorization is required.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>True means enable authorization procedure, while false means disable authorization procedure. Default value is false. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>It's a global attribute and once set, all are affected. </dd></dl>

</div>
</div>
<a class="anchor" id="gac05f7b2605e728e88d64c06cf7f3605e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___b_a___bluetoothble__status__enum.html#gae834c4fd568eace4e2ab307e8905ab7d">ble_status_t</a> ble_sm_reply_display_passkey </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structble__address__t.html">ble_address_t</a> *&#160;</td>
          <td class="paramname"><em>remote_address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>changed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>passkey</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000132">Deprecated:</a></b></dt><dd>This function replies to the SM once <a class="el" href="group___b_a___bluetoothble__events__enum.html#ggacfdd3b8f3b7fac98bc2fe221de579bada3a9c5a31afc031c4cbef3e120e61303c" title="A mandatory event, in case the passkey entry method is used. ">BLE_SM_DISPLAY_PASSKEY_REQ</a> is received.</dd></dl>
<p>If the application wishes to display a different passkey from the one suggested in <a class="el" href="group___b_a___bluetoothble__events__enum.html#ggacfdd3b8f3b7fac98bc2fe221de579bada3a9c5a31afc031c4cbef3e120e61303c" title="A mandatory event, in case the passkey entry method is used. ">BLE_SM_DISPLAY_PASSKEY_REQ</a>, then can set the changed to TRUE and provide the new passkey. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">remote_address</td><td>is the device address to bond. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">changed</td><td>is to tell the SM if user use the passkey from <a class="el" href="group___b_a___bluetoothble__events__enum.html#ggacfdd3b8f3b7fac98bc2fe221de579bada3a9c5a31afc031c4cbef3e120e61303c" title="A mandatory event, in case the passkey entry method is used. ">BLE_SM_DISPLAY_PASSKEY_REQ</a> or make a new one. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">passkey</td><td>is only valid when changed, set the new passkey here. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If the operation completes successfully, the returned value is <a class="el" href="group___b_a___bluetoothble__status__enum.html#ggae834c4fd568eace4e2ab307e8905ab7da8d12a0b561e49e0ebc2f01f09caff1c4" title="The operation completed successfully. ">BLE_STATUS_SUCCESS</a>, otherwise the returned value is less than zero. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>Before using this function, please make sure the ACL link is established. </dd></dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;void ble_sm_common_callback(ble_event_t event_id, const void *param)</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;{</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;    switch (event_id) {</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;        case BLE_SM_DISPLAY_PASSKEY_REQ: {</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;            ble_status_t status;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;            ble_sm_display_passkey_req_t *passkey_param = (ble_sm_display_passkey_req_t*)param;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;            uint32_t passkey = value; //New passkey value.</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;            status = ble_sm_reply_display_passkey(&amp;passkey_param-&gt;remote_address, true, passkey);</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;            break;</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;        }</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;        default:</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;            break;</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;    }</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;}</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a class="anchor" id="gaa1b12f0813581be5e73b54c9b2639c19"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___b_a___bluetoothble__status__enum.html#gae834c4fd568eace4e2ab307e8905ab7d">ble_status_t</a> ble_sm_reply_input_passkey </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structble__address__t.html">ble_address_t</a> *&#160;</td>
          <td class="paramname"><em>remote_address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>accept</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>passkey</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000131">Deprecated:</a></b></dt><dd>This function replies to the SM once <a class="el" href="group___b_a___bluetoothble__events__enum.html#ggacfdd3b8f3b7fac98bc2fe221de579bada121bea1968e5b8a5d0a8e9f4240c3ccb" title="A mandatory event, in case the passkey entry method is used. ">BLE_SM_INPUT_PASSKEY_REQ</a> is received.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">remote_address</td><td>is the device address to bond. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">accept</td><td>is to accept or reject the pairing procedure. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">passkey</td><td>is only valid when accept, set the passkey which user input here. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If the operation completes successfully, the returned value is <a class="el" href="group___b_a___bluetoothble__status__enum.html#ggae834c4fd568eace4e2ab307e8905ab7da8d12a0b561e49e0ebc2f01f09caff1c4" title="The operation completed successfully. ">BLE_STATUS_SUCCESS</a>, otherwise the returned value is less than zero. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>Before using this function, please make sure the ACL link is established. </dd></dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;void ble_sm_common_callback(ble_event_t event_id, const void *param)</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;{</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;    switch (event_id) {</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;        case BLE_SM_INPUT_PASSKEY_REQ:</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;        {</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;            ble_status_t status;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;            ble_sm_input_passkey_req_t *passkey_param = (ble_sm_input_passkey_req_t*)param;</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;            uint32_t passkey = value; //Value is from user.</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;            status = ble_sm_reply_input_passkey(&amp;passkey_param-&gt;remote_address, true, passkey);</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;            break;</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;        }</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;        default:</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;            break;</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;    }</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;}</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a class="anchor" id="ga8a48503e0127214dd44be2562b60d368"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___b_a___bluetoothble__status__enum.html#gae834c4fd568eace4e2ab307e8905ab7d">ble_status_t</a> ble_sm_reply_oob_data </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structble__address__t.html">ble_address_t</a> *&#160;</td>
          <td class="paramname"><em>remote_address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>accept</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>oob_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000133">Deprecated:</a></b></dt><dd>This function replies to the SM once <a class="el" href="group___b_a___bluetoothble__events__enum.html#ggacfdd3b8f3b7fac98bc2fe221de579badade7d27b3148b606e7715dcce2918849a" title="A mandatory event, in case the Out-of-Band data method is used. ">BLE_SM_OOB_DATA_REQ</a> is received.</dd></dl>
<p>User might get data using the out-of-band mechanism, such as NFC. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">remote_address</td><td>is the device address to bond. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">accept</td><td>is to tell SM if user accept or reject the pairing procedure. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">oob_data</td><td>is only valid when accept, and it's 128-bit data. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If the operation completes successfully, the returned value is <a class="el" href="group___b_a___bluetoothble__status__enum.html#ggae834c4fd568eace4e2ab307e8905ab7da8d12a0b561e49e0ebc2f01f09caff1c4" title="The operation completed successfully. ">BLE_STATUS_SUCCESS</a>, otherwise the returned value is less than zero. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>Before using this function, please make sure the ACL link is established. </dd></dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;void ble_sm_common_callback(ble_event_t event_id, const void *param)</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;{</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;    switch (event_id) {</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;        case BLE_SM_OOB_DATA_REQ: {</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;            ble_status_t status;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;            ble_sm_oob_data_req_t *oob_param = (ble_sm_oob_data_req_t*)param;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;            uint8_t oob_data[16] = {1, 3, 5, 7, 9, 2, 4, 6, 8, 10, 88, 88, 88, 88, 88, 88};//Data from OOB mechanism.</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;            status = ble_sm_reply_oob_data(&amp;(oob_param-&gt;remote_address), true, oob_data);</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;            break;</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;        }</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;        default:</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;            break;</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;    }</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;}</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a class="anchor" id="gae639b77a738674db06d7d77980746755"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ble_sm_reply_pairing_authorization </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structble__address__t.html">ble_address_t</a> *&#160;</td>
          <td class="paramname"><em>remote_address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>authorized</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000130">Deprecated:</a></b></dt><dd>This function replies to the SM once <a class="el" href="group___b_a___bluetoothble__events__enum.html#ggacfdd3b8f3b7fac98bc2fe221de579bada48198b7d7d1465ea5e707592b04db1a4" title="A mandatory event, only if a pairing authorization is enabled using ble_sm_set_pairing_authorization(...">BLE_SM_PAIRING_AUTHORIZATION_REQ</a> is received.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">remote_address</td><td>is the device address to bond. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">authorized</td><td>is to accept or reject the pairing/slave request from peer device. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>Before using this function, please make sure ACL link is established. </dd></dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;void ble_sm_common_callback(ble_event_t event_id, const void *param)</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;{</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;    switch (event_id) {</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;        case BLE_SM_PAIRING_AUTHORIZATION_REQ: {</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;            ble_sm_pairing_authorization_req_t *authorization_param = (ble_sm_pairing_authorization_req_t*)param;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;            ble_sm_reply_pairing_authorization(&amp;authorization_param-&gt;remote_address, true);</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;            break;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;        }</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;        default:</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;            break;</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;    }</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;}</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a class="anchor" id="ga1412bffe1028367c324093e34f5cc2ac"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ble_sm_reply_pairing_param </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structble__address__t.html">ble_address_t</a> *&#160;</td>
          <td class="paramname"><em>remote_address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structble__sm__pairing__attribute__t.html">ble_sm_pairing_attribute_t</a> *&#160;</td>
          <td class="paramname"><em>local_attributes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000127">Deprecated:</a></b></dt><dd>This function replies to the SM once <a class="el" href="group___b_a___bluetoothble__events__enum.html#ggacfdd3b8f3b7fac98bc2fe221de579bada529252baf22ceda5a0be2e3da14f3849" title="The start of the SM events. ">BLE_SM_PAIRING_REQ</a> is received.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">remote_address</td><td>is the device address to bond. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">local_attributes</td><td>is the pair attributes to send a pair request/response. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None </dd></dl>
<dl class="section note"><dt>Note</dt><dd>Before using this function, please make sure ACL link is established. </dd></dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;void ble_sm_common_callback(ble_event_t event_id, const void *param)</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;{</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;    switch (event_id) {</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;        case BLE_SM_PAIRING_REQ: {</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;            ble_sm_pairing_req_t *pairing_param = (ble_sm_pairing_req_t*)param;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;            ble_sm_pairing_attribute_t local_attributes = {true, true, false};//mitm, bond, oob</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;            ble_sm_reply_pairing_param(&amp;pairing_param-&gt;remote_address, &amp;local_attributes);</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;            break;</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;        }</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;        default:</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;            break;</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;    }</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;}</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a class="anchor" id="gab475f50b0ff209015fa4f2120350cb4d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ble_sm_set_pairing_authorization </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>enable</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000129">Deprecated:</a></b></dt><dd>Enable authorization procedure, if enable, user will receive <a class="el" href="group___b_a___bluetoothble__events__enum.html#ggacfdd3b8f3b7fac98bc2fe221de579bada48198b7d7d1465ea5e707592b04db1a4" title="A mandatory event, only if a pairing authorization is enabled using ble_sm_set_pairing_authorization(...">BLE_SM_PAIRING_AUTHORIZATION_REQ</a> when get a pair/security request from peer device and ask if need authorization.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">enable</td><td>is true means enable authorization procedure, while false means disable authorization procedure. Default value is false. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>It's a global attribute and once set, all are affected. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Sep 2 2016 12:26:00 for BA Bluetooth API Reference by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
