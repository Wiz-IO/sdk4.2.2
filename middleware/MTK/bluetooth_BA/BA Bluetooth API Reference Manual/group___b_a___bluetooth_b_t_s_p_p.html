<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>BA Bluetooth API Reference: SPP</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="MediaTek.PNG"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BA Bluetooth API Reference
   &#160;<span id="projectnumber">Rev 1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="modules.html"><span>API&#160;Reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group___b_a___bluetooth_b_t_s_p_p.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#groups">Modules</a>  </div>
  <div class="headertitle">
<div class="title">SPP<div class="ingroups"><a class="el" href="group___b_a___bluetooth.html">BA_Bluetooth</a> &raquo; <a class="el" href="group___b_a___bluetooth_b_t.html">BT</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>This section describes the SPP APIs.  
<a href="#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Overview</h2>
<p>This section describes the SPP APIs. </p>
<p>The Serial Port Profile (SPP) can be used to emulate a serial port connection using RFCOMM protocol between two peer devices.</p>
<h1>Supported features </h1>
<ul>
<li><b>SPP</b> <b>Server</b> <br />
SPP server is implemented for a server side connection (Device B, Acceptor) according to the SPP specification. It can wait for another device to take initiative to connect.</li>
<li><b>SPP</b> <b>Client</b> <br />
SPP client is implemented for a client side connection (Device A, Initiator) according to the SPP specification. It can initiate a connection with another device.</li>
</ul>
<h1>Terms and Acronyms </h1>
<table class="doxtable">
<tr>
<th>Terms </th><th>Details  </th></tr>
<tr>
<td><b>UUID</b> </td><td>A Universally Unique Identifier (UUID) is a 16-octet (128-bit) number. </td></tr>
<tr>
<td><b>SPP</b> </td><td>Serial Port Profile, a Bluetooth wireless-interface profile. It emulates a serial cable to provide a simple substitute for existing RS-232, including the familiar control signals. </td></tr>
<tr>
<td><b>RFCOMM</b> </td><td>The Radio Frequency Communication (RFCOMM) is a simple set of transport protocols, made on top of the L2CAP protocol, providing emulated RS-232 serial ports. </td></tr>
<tr>
<td><b>SDP</b> </td><td>Service Discovery Protocol. Used to allow devices to discover what services are supported by each other, and what parameters to use to connect to them. </td></tr>
</table>
<h1><a class="anchor" id="bt_spp_api_usage"></a>
How to use this module</h1>
<ul>
<li>SPP connection in Server mode.<ul>
<li>Step1: Call <a class="el" href="group___b_a___bluetooth_b_t_s_p_p.html#gac3c924ac69782b1d6b619c92223ecd7a">bt_spp_start_service()</a> to create a SPP server instance by registering a RFCOMM channel and SDP service record, then waiting for the SPP client on a remote device to connect. <div class="fragment"><div class="line">port = <a class="code" href="group___b_a___bluetooth_b_t_s_p_p.html#gac3c924ac69782b1d6b619c92223ecd7a">bt_spp_start_service</a>(uuid128, NULL, server_app_callback);</div></div><!-- fragment --></li>
<li>Step2: If a remote SPP client initiates a connection to the SPP server, the <a class="el" href="group___b_a___bluetoothbt__events__enum.html#gga8b00e2c6b59a0beacc2a29537894564ead4ed66dfaff1eada31ab302c9962959e" title="The start of the SPP events. ">BT_SPP_CONNECT_IND</a> event is generated to trigger a server callback function registered with the <a class="el" href="group___b_a___bluetooth_b_t_s_p_p.html#gac3c924ac69782b1d6b619c92223ecd7a">bt_spp_start_service()</a>.</li>
<li>Step3: Call <a class="el" href="group___b_a___bluetooth_b_t_s_p_p.html#gab83a5bcb1855da66751c1c5dd0f52234">bt_spp_connect_response()</a> to accept or reject this connection request from the remote SPP client. <div class="fragment"><div class="line">server_app_callback(<a class="code" href="group___b_a___bluetoothbt__events__enum.html#ga8b00e2c6b59a0beacc2a29537894564e">bt_event_t</a> event_id, <span class="keywordtype">void</span>* parameter)</div><div class="line">{</div><div class="line">    <span class="keywordflow">switch</span> (event_id) {</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group___b_a___bluetoothbt__events__enum.html#gga8b00e2c6b59a0beacc2a29537894564ead4ed66dfaff1eada31ab302c9962959e">BT_SPP_CONNECT_IND</a>:</div><div class="line">            <a class="code" href="group___b_a___bluetooth_b_t_s_p_p.html#gab83a5bcb1855da66751c1c5dd0f52234">bt_spp_connect_response</a>(parameter-&gt;port, <span class="keyword">true</span>, spp_tx_buf, tx_buf_size, spp_rx_buf, rx_buf_size);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">default</span>:</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --></li>
<li>Step4: A <a class="el" href="group___b_a___bluetoothbt__events__enum.html#gga8b00e2c6b59a0beacc2a29537894564ea1b48c90099cfa5f2a4166290a7b5c24e" title="The result of a connect attempt initiated by a local or remote device is available. ">BT_SPP_CONNECT_CNF</a> event is generated to trigger the server callback function if the device is connected.</li>
</ul>
</li>
<li>SPP connection in Client mode.<ul>
<li>Step1: Call <a class="el" href="group___b_a___bluetooth_b_t_s_p_p.html#ga2d2a1c0e4b08dffe06bb66a5d21b303c">bt_spp_connect()</a> to initiate a connection to a remote server. <div class="fragment"><div class="line"><a class="code" href="group___b_a___bluetooth_b_t_s_p_p.html#ga2d2a1c0e4b08dffe06bb66a5d21b303c">bt_spp_connect</a>(remote_address, uuid128, spp_tx_buffer, tx_size, spp_rx_buffer, rx_size, client_app_callback);</div></div><!-- fragment --></li>
<li>Step2: A <a class="el" href="group___b_a___bluetoothbt__events__enum.html#gga8b00e2c6b59a0beacc2a29537894564ea1b48c90099cfa5f2a4166290a7b5c24e" title="The result of a connect attempt initiated by a local or remote device is available. ">BT_SPP_CONNECT_CNF</a> event is generated to trigger the client callback function registered with the <a class="el" href="group___b_a___bluetooth_b_t_s_p_p.html#ga2d2a1c0e4b08dffe06bb66a5d21b303c">bt_spp_connect()</a> if the device is connected.</li>
</ul>
</li>
<li>Write data.<ul>
<li>Step1: Call <a class="el" href="group___b_a___bluetooth_b_t_s_p_p.html#ga55fcd944969238610d2aa40d92103e5c">bt_spp_write()</a> to send application data to the remote device. If returned value is less than the size of application data to write, the application must wait for <a class="el" href="group___b_a___bluetoothbt__events__enum.html#gga8b00e2c6b59a0beacc2a29537894564ea2e25afc86ab340c33afc61363a60ed07" title="The SPP profile&#39;s TX buffer has free space to send data. ">BT_SPP_READY_TO_WRITE_IND</a> event for the next write. <div class="fragment"><div class="line">int32_t total_sent_size = 0;</div><div class="line">uint32_t total_size = 1000;</div><div class="line">uint8_t app_data[1000];</div><div class="line"><span class="keywordflow">do</span> {</div><div class="line">    uint32_t real_sent_size = 0;</div><div class="line">    real_sent_size = <a class="code" href="group___b_a___bluetooth_b_t_s_p_p.html#ga55fcd944969238610d2aa40d92103e5c">bt_spp_write</a>(port, app_data + 1000 - total_size, total_size - total_sent_size);</div><div class="line">    <span class="keywordflow">if</span> (real_sent_size &gt; 0) {</div><div class="line">        total_sent_size += real_sent_size;</div><div class="line">    } <span class="keywordflow">else</span> {</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">} <span class="keywordflow">while</span> (total_size - total_sent_size &gt; 0);</div></div><!-- fragment --></li>
<li>Step2: If the application received <a class="el" href="group___b_a___bluetoothbt__events__enum.html#gga8b00e2c6b59a0beacc2a29537894564ea2e25afc86ab340c33afc61363a60ed07" title="The SPP profile&#39;s TX buffer has free space to send data. ">BT_SPP_READY_TO_WRITE_IND</a> event, it can continue to write the rest of application data. <div class="fragment"><div class="line"><span class="keywordflow">do</span> {</div><div class="line">    uint32_t real_sent_size = 0;</div><div class="line">    real_sent_size = <a class="code" href="group___b_a___bluetooth_b_t_s_p_p.html#ga55fcd944969238610d2aa40d92103e5c">bt_spp_write</a>(port, app_data + 1000 - total_size, total_size - total_sent_size);</div><div class="line">    <span class="keywordflow">if</span> (real_sent_size &gt; 0) {</div><div class="line">        total_sent_size += real_sent_size;</div><div class="line">    } <span class="keywordflow">else</span> {</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">} <span class="keywordflow">while</span> (total_size - total_sent_size &gt; 0);</div></div><!-- fragment --></li>
</ul>
</li>
<li>Read data.<ul>
<li>Step1: Call <a class="el" href="group___b_a___bluetooth_b_t_s_p_p.html#gaaf89bfe25aa5ebe387e37f0cee570463">bt_spp_read()</a> to receive application data from the remote device. If returned value is less than the size of application data to read, the application must wait for <a class="el" href="group___b_a___bluetoothbt__events__enum.html#gga8b00e2c6b59a0beacc2a29537894564eab269c5a51379437ae0f7bcde84ef8235" title="The SPP profile&#39;s RX buffer has received data. ">BT_SPP_READY_TO_READ_IND</a> event for the next read. <div class="fragment"><div class="line">int32_t total_received_size = 0;</div><div class="line">uint8_t app_rx_buffer[1000];</div><div class="line">uint32_t total_size = 1000;</div><div class="line"><span class="keywordflow">do</span> {</div><div class="line">    int32_t real_received_size = 0;</div><div class="line">    real_received_size = <a class="code" href="group___b_a___bluetooth_b_t_s_p_p.html#gaaf89bfe25aa5ebe387e37f0cee570463">bt_spp_read</a>(port, app_rx_buffer + total_received_size, total_size - total_received_size);</div><div class="line">    <span class="keywordflow">if</span> (real_received_size &gt; 0) {</div><div class="line">        total_received_size += real_received_size;</div><div class="line">    } <span class="keywordflow">else</span> {</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">} <span class="keywordflow">while</span> (total_size - total_received_size &gt; 0);</div></div><!-- fragment --></li>
<li>Step2: If the application received <a class="el" href="group___b_a___bluetoothbt__events__enum.html#gga8b00e2c6b59a0beacc2a29537894564eab269c5a51379437ae0f7bcde84ef8235" title="The SPP profile&#39;s RX buffer has received data. ">BT_SPP_READY_TO_READ_IND</a> event, it can continue to read the rest of received data. <div class="fragment"><div class="line"><span class="keywordflow">do</span> {</div><div class="line">    int32_t real_received_size = 0;</div><div class="line">    real_received_size = <a class="code" href="group___b_a___bluetooth_b_t_s_p_p.html#gaaf89bfe25aa5ebe387e37f0cee570463">bt_spp_read</a>(port, app_rx_buffer + total_received_size, total_size - total_received_size);</div><div class="line">    <span class="keywordflow">if</span> (real_received_size &gt; 0) {</div><div class="line">        total_received_size += real_received_size;</div><div class="line">    } <span class="keywordflow">else</span> {</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">} <span class="keywordflow">while</span> (total_size - total_received_size &gt; 0);</div></div><!-- fragment --></li>
</ul>
</li>
<li>Disconnect the SPP connection.<ul>
<li>Step1: Call <a class="el" href="group___b_a___bluetooth_b_t_s_p_p.html#gaa763993a8445171636e890dd1a7ff245">bt_spp_disconnect()</a> to disconnect the SPP connection from a remote device. <div class="fragment"><div class="line">ret = <a class="code" href="group___b_a___bluetooth_b_t_s_p_p.html#gaa763993a8445171636e890dd1a7ff245">bt_spp_disconnect</a>(port);</div></div><!-- fragment --></li>
<li>Step2: A <a class="el" href="group___b_a___bluetoothbt__events__enum.html#gga8b00e2c6b59a0beacc2a29537894564ea1eb3600bbd0bb4b584ca45151d4d5429" title="A disconnect attempt is initiated by a local or remote device, or link loss occurred. ">BT_SPP_DISCONNECT_IND</a> event will notify application callback function to indicate the result of the disconnection. <div class="fragment"><div class="line">app_callback(<a class="code" href="group___b_a___bluetoothbt__events__enum.html#ga8b00e2c6b59a0beacc2a29537894564e">bt_event_t</a> event_id, <span class="keywordtype">void</span>* parameter)</div><div class="line">{</div><div class="line">    <span class="keywordflow">switch</span> (event_id) {</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group___b_a___bluetoothbt__events__enum.html#gga8b00e2c6b59a0beacc2a29537894564ea1eb3600bbd0bb4b584ca45151d4d5429">BT_SPP_DISCONNECT_IND</a>:</div><div class="line">            <span class="keywordflow">if</span> (parameter-&gt;result == <a class="code" href="group___b_a___bluetoothbt__status__enum.html#ggad9bc9592dee73efbcdf072bff7fb366aaec868a4e69cda29b3e4e4b016ba51ce5">BT_STATUS_SUCCESS</a>) {</div><div class="line">                <span class="comment">//SPP disconnected</span></div><div class="line">            }</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">default</span>:</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --></li>
</ul>
</li>
<li>Stop a SPP server in Server mode.<ul>
<li>Step1: Call <a class="el" href="group___b_a___bluetooth_b_t_s_p_p.html#ga7e18c8bd91dc56097f71c94d92238422">bt_spp_stop_service()</a> to delete the SPP server instance by unregistering the RFCOMM channel and SDP service record. The remote client will no longer be able to connect to the server. <div class="fragment"><div class="line">ret = <a class="code" href="group___b_a___bluetooth_b_t_s_p_p.html#ga7e18c8bd91dc56097f71c94d92238422">bt_spp_stop_service</a>(port);</div></div><!-- fragment --> </li>
</ul>
</li>
</ul>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gac3c924ac69782b1d6b619c92223ecd7a"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_a___bluetooth_b_t_s_p_p.html#gac3c924ac69782b1d6b619c92223ecd7a">bt_spp_start_service</a> (const uint8_t *uuid128, const int8_t *service_name, <a class="el" href="group___b_a___bluetoothbt__spp__typedef.html#gade91e6094c3f61c1e457e3b541977e26">bt_spp_common_callback</a> app_callback)</td></tr>
<tr class="separator:gac3c924ac69782b1d6b619c92223ecd7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2d2a1c0e4b08dffe06bb66a5d21b303c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___b_a___bluetoothbt__status__enum.html#gad9bc9592dee73efbcdf072bff7fb366a">bt_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_a___bluetooth_b_t_s_p_p.html#ga2d2a1c0e4b08dffe06bb66a5d21b303c">bt_spp_connect</a> (const <a class="el" href="structbt__address__t.html">bt_address_t</a> *bt_address, const uint8_t *uuid128, void *tx_buffer, uint32_t tx_size, void *rx_buffer, uint32_t rx_size, <a class="el" href="group___b_a___bluetoothbt__spp__typedef.html#gade91e6094c3f61c1e457e3b541977e26">bt_spp_common_callback</a> app_callback)</td></tr>
<tr class="separator:ga2d2a1c0e4b08dffe06bb66a5d21b303c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab83a5bcb1855da66751c1c5dd0f52234"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___b_a___bluetoothbt__status__enum.html#gad9bc9592dee73efbcdf072bff7fb366a">bt_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_a___bluetooth_b_t_s_p_p.html#gab83a5bcb1855da66751c1c5dd0f52234">bt_spp_connect_response</a> (<a class="el" href="group___b_a___bluetoothbt__spp__typedef.html#ga36fbb78a203e5cfb5c9dbfca1e617c55">bt_spp_port_id_t</a> port, bool response, void *tx_buffer, uint32_t tx_size, void *rx_buffer, uint32_t rx_size)</td></tr>
<tr class="separator:gab83a5bcb1855da66751c1c5dd0f52234"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaaf89bfe25aa5ebe387e37f0cee570463"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_a___bluetooth_b_t_s_p_p.html#gaaf89bfe25aa5ebe387e37f0cee570463">bt_spp_read</a> (<a class="el" href="group___b_a___bluetoothbt__spp__typedef.html#ga36fbb78a203e5cfb5c9dbfca1e617c55">bt_spp_port_id_t</a> port, void *app_buffer, uint32_t size)</td></tr>
<tr class="separator:gaaf89bfe25aa5ebe387e37f0cee570463"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga55fcd944969238610d2aa40d92103e5c"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_a___bluetooth_b_t_s_p_p.html#ga55fcd944969238610d2aa40d92103e5c">bt_spp_write</a> (<a class="el" href="group___b_a___bluetoothbt__spp__typedef.html#ga36fbb78a203e5cfb5c9dbfca1e617c55">bt_spp_port_id_t</a> port, void *app_buffer, uint32_t size)</td></tr>
<tr class="separator:ga55fcd944969238610d2aa40d92103e5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa763993a8445171636e890dd1a7ff245"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___b_a___bluetoothbt__status__enum.html#gad9bc9592dee73efbcdf072bff7fb366a">bt_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_a___bluetooth_b_t_s_p_p.html#gaa763993a8445171636e890dd1a7ff245">bt_spp_disconnect</a> (<a class="el" href="group___b_a___bluetoothbt__spp__typedef.html#ga36fbb78a203e5cfb5c9dbfca1e617c55">bt_spp_port_id_t</a> port)</td></tr>
<tr class="separator:gaa763993a8445171636e890dd1a7ff245"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7e18c8bd91dc56097f71c94d92238422"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___b_a___bluetoothbt__status__enum.html#gad9bc9592dee73efbcdf072bff7fb366a">bt_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_a___bluetooth_b_t_s_p_p.html#ga7e18c8bd91dc56097f71c94d92238422">bt_spp_stop_service</a> (<a class="el" href="group___b_a___bluetoothbt__spp__typedef.html#ga36fbb78a203e5cfb5c9dbfca1e617c55">bt_spp_port_id_t</a> port)</td></tr>
<tr class="separator:ga7e18c8bd91dc56097f71c94d92238422"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group___b_a___bluetoothbt__spp__define"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_a___bluetoothbt__spp__define.html">Define</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group___b_a___bluetoothbt__spp__struct"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_a___bluetoothbt__spp__struct.html">Struct</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group___b_a___bluetoothbt__spp__typedef"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_a___bluetoothbt__spp__typedef.html">Typedef</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga2d2a1c0e4b08dffe06bb66a5d21b303c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___b_a___bluetoothbt__status__enum.html#gad9bc9592dee73efbcdf072bff7fb366a">bt_status_t</a> bt_spp_connect </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structbt__address__t.html">bt_address_t</a> *&#160;</td>
          <td class="paramname"><em>bt_address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>uuid128</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>tx_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tx_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>rx_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>rx_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___b_a___bluetoothbt__spp__typedef.html#gade91e6094c3f61c1e457e3b541977e26">bt_spp_common_callback</a>&#160;</td>
          <td class="paramname"><em>app_callback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000414">Deprecated:</a></b></dt><dd>This function is for the SPP client to connect to a remote server, a <a class="el" href="group___b_a___bluetoothbt__events__enum.html#gga8b00e2c6b59a0beacc2a29537894564ea1b48c90099cfa5f2a4166290a7b5c24e" title="The result of a connect attempt initiated by a local or remote device is available. ">BT_SPP_CONNECT_CNF</a> event will be reported to the application to indicate the result of the connection.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">bt_address</td><td>is the Bluetooth address of a remote device. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">uuid128</td><td>is a 128-bit UUID of remote server. If set to NULL, it will use default UUID {0x00,0x00,0x11, 0x01,0x00,0x00,0x10,0x00,0x80,0x00,0x00,0x80,0x5F,0x9B,0x34,0xFB} to connect remote server. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tx_buffer</td><td>is the SPP TX buffer, SPP profile will use it to send application's data to remote device. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tx_size</td><td>is the size of TX buffer, it must be equal or greater than <a class="el" href="group___b_a___bluetoothbt__spp__define.html#gafe9484d094fb5999bdb119c94944486b">BT_SPP_MIN_TX_BUFSIZE</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rx_buffer</td><td>is the RX buffer size, SPP profile will use it to receive data from remote device. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rx_size</td><td>is the size of RX buffer, it must be equal or greater than <a class="el" href="group___b_a___bluetoothbt__spp__define.html#gad55a3e23713c19f09d532dc1078556e5">BT_SPP_MIN_RX_BUFSIZE</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">app_callback</td><td>is a notify callback set by a server application to handle events received from SDK layer. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If the operation was successful, the returned value is <a class="el" href="group___b_a___bluetoothbt__status__enum.html#ggad9bc9592dee73efbcdf072bff7fb366aaec868a4e69cda29b3e4e4b016ba51ce5" title="The operation completed successfully. ">BT_STATUS_SUCCESS</a>, otherwise the returned value is less than zero. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___b_a___bluetooth_b_t_s_p_p.html#gaa763993a8445171636e890dd1a7ff245">bt_spp_disconnect()</a> </dd></dl>
<dl class="section note"><dt>Note</dt><dd>It can only be used by a SPP client. </dd></dl>

</div>
</div>
<a class="anchor" id="gab83a5bcb1855da66751c1c5dd0f52234"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___b_a___bluetoothbt__status__enum.html#gad9bc9592dee73efbcdf072bff7fb366a">bt_status_t</a> bt_spp_connect_response </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___b_a___bluetoothbt__spp__typedef.html#ga36fbb78a203e5cfb5c9dbfca1e617c55">bt_spp_port_id_t</a>&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>response</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>tx_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tx_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>rx_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>rx_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000415">Deprecated:</a></b></dt><dd>This function is for the SPP server to accept or reject connection from a remote client, a <a class="el" href="group___b_a___bluetoothbt__events__enum.html#gga8b00e2c6b59a0beacc2a29537894564ea1b48c90099cfa5f2a4166290a7b5c24e" title="The result of a connect attempt initiated by a local or remote device is available. ">BT_SPP_CONNECT_CNF</a> event will be reported to the application to indicate the result of the response.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">port</td><td>is port ID of the SPP server as a response to the established connection. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">response</td><td>is accept or reject. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tx_buffer</td><td>is the SPP TX buffer, SPP profile will use it to send application's data to a remote device. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tx_size</td><td>is the size of TX buffer, it must be equal or greater than <a class="el" href="group___b_a___bluetoothbt__spp__define.html#gafe9484d094fb5999bdb119c94944486b">BT_SPP_MIN_TX_BUFSIZE</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rx_buffer</td><td>is the RX buffer size, SPP profile will use it to receive data from remote device. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rx_size</td><td>is the size of RX buffer, it must be equal or greater than <a class="el" href="group___b_a___bluetoothbt__spp__define.html#gad55a3e23713c19f09d532dc1078556e5">BT_SPP_MIN_RX_BUFSIZE</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If the operation was successful, the returned value is <a class="el" href="group___b_a___bluetoothbt__status__enum.html#ggad9bc9592dee73efbcdf072bff7fb366aaec868a4e69cda29b3e4e4b016ba51ce5" title="The operation completed successfully. ">BT_STATUS_SUCCESS</a>, otherwise the returned value is less than zero. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___b_a___bluetooth_b_t_s_p_p.html#gaa763993a8445171636e890dd1a7ff245">bt_spp_disconnect()</a> </dd></dl>
<dl class="section note"><dt>Note</dt><dd>It can only be used by the SPP server. </dd></dl>

</div>
</div>
<a class="anchor" id="gaa763993a8445171636e890dd1a7ff245"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___b_a___bluetoothbt__status__enum.html#gad9bc9592dee73efbcdf072bff7fb366a">bt_status_t</a> bt_spp_disconnect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___b_a___bluetoothbt__spp__typedef.html#ga36fbb78a203e5cfb5c9dbfca1e617c55">bt_spp_port_id_t</a>&#160;</td>
          <td class="paramname"><em>port</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000418">Deprecated:</a></b></dt><dd>This function is for application to disconnect a connection; a <a class="el" href="group___b_a___bluetoothbt__events__enum.html#gga8b00e2c6b59a0beacc2a29537894564ea1eb3600bbd0bb4b584ca45151d4d5429" title="A disconnect attempt is initiated by a local or remote device, or link loss occurred. ">BT_SPP_DISCONNECT_IND</a> event will be reported to application to indicate the result of the disconnection.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">port</td><td>is a SPP instance port id. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If the operation was successful, the returned value is <a class="el" href="group___b_a___bluetoothbt__status__enum.html#ggad9bc9592dee73efbcdf072bff7fb366aaec868a4e69cda29b3e4e4b016ba51ce5" title="The operation completed successfully. ">BT_STATUS_SUCCESS</a>, otherwise the returned value is less than zero. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___b_a___bluetooth_b_t_s_p_p.html#ga2d2a1c0e4b08dffe06bb66a5d21b303c">bt_spp_connect()</a>, <a class="el" href="group___b_a___bluetooth_b_t_s_p_p.html#gab83a5bcb1855da66751c1c5dd0f52234">bt_spp_connect_response()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="gaaf89bfe25aa5ebe387e37f0cee570463"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t bt_spp_read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___b_a___bluetoothbt__spp__typedef.html#ga36fbb78a203e5cfb5c9dbfca1e617c55">bt_spp_port_id_t</a>&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>app_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000416">Deprecated:</a></b></dt><dd>This function is for application read data.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">port</td><td>is the port ID of the SPP instance. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">app_buffer</td><td>is the data buffer that application want to read from the RX buffer. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>is the size of data that application want to read. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If the operation was successful, the returned value is the size of data read, otherwise it is an error code. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___b_a___bluetooth_b_t_s_p_p.html#ga55fcd944969238610d2aa40d92103e5c">bt_spp_write()</a> </dd></dl>
<dl class="section note"><dt>Note</dt><dd>If returned value is less than the size of data that application want to read, then there is no data available from a remote device. The application must wait <a class="el" href="group___b_a___bluetoothbt__events__enum.html#gga8b00e2c6b59a0beacc2a29537894564eab269c5a51379437ae0f7bcde84ef8235" title="The SPP profile&#39;s RX buffer has received data. ">BT_SPP_READY_TO_READ_IND</a> event to apply the next read. </dd></dl>

</div>
</div>
<a class="anchor" id="gac3c924ac69782b1d6b619c92223ecd7a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t bt_spp_start_service </td>
          <td>(</td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>uuid128</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int8_t *&#160;</td>
          <td class="paramname"><em>service_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___b_a___bluetoothbt__spp__typedef.html#gade91e6094c3f61c1e457e3b541977e26">bt_spp_common_callback</a>&#160;</td>
          <td class="paramname"><em>app_callback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000413">Deprecated:</a></b></dt><dd>This function creates the SPP server instance, then waits for the SPP client on a remote device to connect.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">uuid128</td><td>is a 128-bit UUID to identify the SPP server. User can assign their own unique and private UUID. If it is set to NULL, the default UUID {0x00,0x00,0x11,0x01,0x00,0x00,0x10,0x00,0x80,0x00,0x00,0x80, 0x5F,0x9B,0x34,0xFB} which was assigned to identify the SPP profile in Bluetooth specification will be used. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">service_name</td><td>is to identify a SPP server service name, UTF-8. It is an optional parameter and can be set to NULL. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">app_callback</td><td>is a notify callback set by a server application to handle events received from SDK layer. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If create service operation was successful, the returned value is the port ID, otherwise the returned value is less than zero. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___b_a___bluetooth_b_t_s_p_p.html#ga7e18c8bd91dc56097f71c94d92238422">bt_spp_stop_service()</a> </dd></dl>
<dl class="section note"><dt>Note</dt><dd>It can only be used by a SPP server. It's suggested to call this function immediately after the Bluetooth is powered on. </dd></dl>

</div>
</div>
<a class="anchor" id="ga7e18c8bd91dc56097f71c94d92238422"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___b_a___bluetoothbt__status__enum.html#gad9bc9592dee73efbcdf072bff7fb366a">bt_status_t</a> bt_spp_stop_service </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___b_a___bluetoothbt__spp__typedef.html#ga36fbb78a203e5cfb5c9dbfca1e617c55">bt_spp_port_id_t</a>&#160;</td>
          <td class="paramname"><em>port</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000419">Deprecated:</a></b></dt><dd>This function is to stop the SPP server service.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">port</td><td>is the port ID of the SPP instance. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If the operation was successful, the returned value is <a class="el" href="group___b_a___bluetoothbt__status__enum.html#ggad9bc9592dee73efbcdf072bff7fb366aaec868a4e69cda29b3e4e4b016ba51ce5" title="The operation completed successfully. ">BT_STATUS_SUCCESS</a>, otherwise the returned value is less than zero. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___b_a___bluetooth_b_t_s_p_p.html#gac3c924ac69782b1d6b619c92223ecd7a">bt_spp_start_service()</a> </dd></dl>
<dl class="section note"><dt>Note</dt><dd>It can only be used by a SPP server. </dd></dl>

</div>
</div>
<a class="anchor" id="ga55fcd944969238610d2aa40d92103e5c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t bt_spp_write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___b_a___bluetoothbt__spp__typedef.html#ga36fbb78a203e5cfb5c9dbfca1e617c55">bt_spp_port_id_t</a>&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>app_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000417">Deprecated:</a></b></dt><dd>This function is for application write data.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">port</td><td>is the port ID of the SPP instance. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">app_buffer</td><td>is the data buffer that application want to write to the TX buffer. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>is the size of data that application want to write. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If the operation was successful, the returned value is the size of data to be written, otherwise it is an error code. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___b_a___bluetooth_b_t_s_p_p.html#gaaf89bfe25aa5ebe387e37f0cee570463">bt_spp_read()</a> </dd></dl>
<dl class="section note"><dt>Note</dt><dd>If returned value is less than the size of data that application want to write, then the SPP TX buffer is full and data cannot be transferred. The application must wait for <a class="el" href="group___b_a___bluetoothbt__events__enum.html#gga8b00e2c6b59a0beacc2a29537894564ea2e25afc86ab340c33afc61363a60ed07" title="The SPP profile&#39;s TX buffer has free space to send data. ">BT_SPP_READY_TO_WRITE_IND</a> event to apply the next write. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Sep 2 2016 12:26:00 for BA Bluetooth API Reference by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
